<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>For You ‚Äî Always</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Dancing+Script&display=swap" rel="stylesheet">
  <style>
    html,body{height:100%;margin:0;font-family:Arial,Helvetica,sans-serif;background:#fff;overflow:hidden}
    .wrap{height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}
    .final-msg{font-family:'Great Vibes',cursive;color:#b5832f;font-size:50px;opacity:0;text-shadow:0 6px 18px rgba(181,131,47,0.08)}
    .sub{font-family:'Dancing Script',cursive;color:#c96b7b;font-size:28px;margin-top:18px;opacity:0}

    /* warm bleed */
    .bleed1, .bleed2{position:fixed;inset:0;pointer-events:none}
    .bleed1{background:radial-gradient(circle at 10% 10%, rgba(255,230,200,0.6), rgba(255,230,200,0) 20%);opacity:0}
    .bleed2{background:radial-gradient(circle at 90% 90%, rgba(255,210,220,0.5), rgba(255,210,220,0) 20%);opacity:0}

    /* canvas heart area */
    #heartCanvas{width:100%;max-width:720px;height:420px;display:block}

    @keyframes fadeInSlow{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
  </style>
</head>
<body>
  <div class="bleed1" id="b1"></div>
  <div class="bleed2" id="b2"></div>
  <div class="wrap">
    <div class="final-msg" id="finalMsg">What ever happens don't worry panda I will be always with you. Promise!</div>
    <canvas id="heartCanvas"></canvas>
    <div class="sub" id="signoff">Once again Happy Birthday Panda!üíù</div>
  </div>

  <script>
    // fade in message
    const final = document.getElementById('finalMsg'); const sign = document.getElementById('signoff'); const b1=document.getElementById('b1'), b2=document.getElementById('b2');
    setTimeout(()=>{ final.style.transition='opacity 2s ease'; final.style.opacity=1; final.style.transform='translateY(0)'; },600);

    // animate warm bleed in
    setTimeout(()=>{ b1.style.transition='opacity 1.6s ease'; b2.style.transition='opacity 1.6s ease'; b1.style.opacity=1; b2.style.opacity=1; },900);

    // heart formation canvas
    const canvas = document.getElementById('heartCanvas'); const ctx = canvas.getContext('2d'); function resize(){ canvas.width = Math.min(window.innerWidth*0.9,720); canvas.height = 420; } resize(); window.addEventListener('resize', resize);

    // heart curve param -> x,y function
    function heartXY(t, scale, cx, cy){ const x = 16*Math.pow(Math.sin(t),3); const y = 13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t); return {x: cx + x*scale, y: cy - y*scale}; }

    // create particles
    const N = 420; let particles=[];
    function initParticles(){ particles=[]; for(let i=0;i<N;i++){ particles.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, tx:0, ty:0, t:Math.random()*Math.PI*2, c:'#fff'}); } }

    // ...existing code...
function computeTargets(){ 
  const pts=[]; 
  const scale = Math.min(canvas.width/40,10); // smaller heart (was 18)
  const cx = canvas.width/2; 
  const cy = canvas.height/2+20; 
  for(let i=0;i<N;i++){ 
    const t = (i/N)*Math.PI*2; 
    const p=heartXY(t,scale,cx,cy); 
    pts.push(p); 
  } 
  return pts; 
}

function animateFormation(){ 
  const targets = computeTargets(); // assign
  for(let i=0;i<N;i++){ 
    particles[i].tx = targets[i].x + (Math.random()*8-4); 
    particles[i].ty = targets[i].y + (Math.random()*8-4); 
    particles[i].delay = Math.random()*1000; 
  }
  const start = performance.now(); 
  function frame(now){ 
    const elapsed = now-start; 
    ctx.clearRect(0,0,canvas.width,canvas.height);
    let complete=true;
    for(let i=0;i<N;i++){ 
      const p=particles[i]; 
      const d = Math.max(0, Math.min(1, (elapsed - p.delay)/3500)); 
      const ease = 1 - Math.pow(1-d,3); 
      if(d<1) complete=false; 
      p.x += (p.tx - p.x)*0.08* (0.5+ease); 
      p.y += (p.ty - p.y)*0.08* (0.5+ease);
      // color ripple based on angle
      const angle = Math.atan2(p.y - canvas.height/2, p.x - canvas.width/2);
      const hue = 350 + Math.sin((elapsed/300)+angle)*40;
      ctx.fillStyle = `hsl(${hue},75%,${50 - Math.abs(Math.sin(elapsed/500+angle))*12}%)`;
      ctx.beginPath(); ctx.arc(p.x,p.y,2.2,0,Math.PI*2); ctx.fill(); 
    }
    if(!complete) requestAnimationFrame(frame);
    else { 
      // pulse forever
      pulse(); 
      setTimeout(()=>{ 
        sign.style.transition='opacity 1s ease, transform 1s ease'; 
        sign.style.opacity=1; 
        sign.style.transform='translateY(0)'; 
      },1000);
    }
  }
  requestAnimationFrame(frame);
}

// pulse forever
function pulse(){ 
  let t=0; 
  function drawPulse(){
    t+=0.03; 
    ctx.save(); 
    ctx.globalCompositeOperation='lighter'; 
    for(let i=0;i<N;i++){ 
      const p=particles[i]; 
      const s = 1 + 0.03*Math.sin(t*2 + i*0.02); 
      ctx.fillStyle='rgba(255,215,180,0.9)'; 
      ctx.beginPath(); 
      ctx.arc(p.x,p.y,2.2*s,0,Math.PI*2); 
      ctx.fill(); 
    } 
    ctx.restore(); 
     // keep pulsing forever
  }
  drawPulse();
  requestAnimationFrame(drawPulse);
}
// ...existing code...
  initParticles(); animateFormation();  
  </script>
</body>
</html>